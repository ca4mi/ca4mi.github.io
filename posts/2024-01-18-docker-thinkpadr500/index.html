<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Thinkpad R500-д Almalinux 8 OS + Docker + Nginx proxy manager + SSL certificate + DuckDNS | ca4mi</title><meta name=keywords content><meta name=description content="Nginx Proxy Manager + DuckDNS + Containers"><meta name=author content="ca4mi"><link rel=canonical href=https://ca4mi.net/posts/2024-01-18-docker-thinkpadr500/><link crossorigin=anonymous href=/assets/css/stylesheet.93f625d739f1d6a5c6f20c146bc6a8d26b233492b34b2220c54b12fd46a04ded.css integrity="sha256-k/Yl1znx1qXG8gwUa8ao0msjNJKzSyIgxUsS/UagTe0=" rel="preload stylesheet" as=style><link rel=icon href=https://ca4mi.net/static/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ca4mi.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ca4mi.net/favicon-32x32.png><link rel=apple-touch-icon href=https://ca4mi.net/apple-touch-icon.png><link rel=mask-icon href=https://ca4mi.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://ca4mi.net/posts/2024-01-18-docker-thinkpadr500/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://ca4mi.net/posts/2024-01-18-docker-thinkpadr500/"><meta property="og:site_name" content="ca4mi"><meta property="og:title" content="Thinkpad R500-д Almalinux 8 OS + Docker + Nginx proxy manager + SSL certificate + DuckDNS"><meta property="og:description" content="Nginx Proxy Manager + DuckDNS + Containers"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-18T00:00:00+00:00"><meta property="article:modified_time" content="2024-01-18T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Thinkpad R500-д Almalinux 8 OS + Docker + Nginx proxy manager + SSL certificate + DuckDNS"><meta name=twitter:description content="Nginx Proxy Manager + DuckDNS + Containers"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ca4mi.net/posts/"},{"@type":"ListItem","position":2,"name":"Thinkpad R500-д Almalinux 8 OS + Docker + Nginx proxy manager + SSL certificate + DuckDNS","item":"https://ca4mi.net/posts/2024-01-18-docker-thinkpadr500/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Thinkpad R500-д Almalinux 8 OS + Docker + Nginx proxy manager + SSL certificate + DuckDNS","name":"Thinkpad R500-д Almalinux 8 OS \u002b Docker \u002b Nginx proxy manager \u002b SSL certificate \u002b DuckDNS","description":"Nginx Proxy Manager + DuckDNS + Containers","keywords":[],"articleBody":"OS Almalinux 8.9 minimal ISO суулгасан. Суулгах явцад root-с тусад нь user үүсгэн wheel группд нэмсэн.\n# hostnamectl Icon name: computer-laptop Chassis: laptop Operating System: AlmaLinux 8.9 (Midnight Oncilla) CPE OS Name: cpe:/o:almalinux:almalinux:8::baseos Kernel: Linux 4.18.0-513.9.1.el8_9.x86_64 Architecture: x86-64 # lshw vendor: LENOVO version: ThinkPad R500 cpu: Celeron(R) Dual-Core CPU T3100 @ 1.90GHz ram: 8G DDR2 800MHz Docker \u0026 docker compose Суулгах\nsudo dnf upgrade sudo dnf install yum-utils sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo sudo dnf install docker-ce docker-ce-cli containerd.io docker-compose-plugin # Complete бол сервис асаана sudo systemctl start docker sudo systemctl enable docker # check version docker --version # Docker version 24.0.7, build afdd53b docker-compose --version # Docker Compose version v2.12.2 Compose ажиллахгүй бол энэ аргаар суулгана:\ncurl -L \"https://github.com/docker/compose/releases/download/v2.12.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/bin/docker-compose chmod +x /usr/bin/docker-compose Non root user бол docker group үүсгээд sudo үүсгэх боломжтой болгоорой.\n# Add alma user to wheel group sudo usermod -aG wheel alma # Add alma user to docker group sudo usermod -aG docker alma # groups alma wheel docker # id uid=1000(alma) gid=1000(alma) groups=1000(alma),10(wheel),992(docker) Docker compose nginxproxymanager, nextcloud, homeassistant, jellyfin, odoo+postgres, navidrome docker compose бүрдэнэ. Nginx proxy manager дээр HTTPS (Let’s encrypt) авахад бас DuckDNS domain авахад ашиглана. Docker network-оо дундаа ашиглана. 3 port docker -с host руу 80, 81, 443 expose хийсэн.\nversion: '2.2' services: nginxproxymanager: image: 'jc21/nginx-proxy-manager:latest' container_name: nginxproxymanager restart: unless-stopped ports: - '80:80' - '81:81' - '443:443' volumes: - ./nginx/data:/data - ./nginx/letsencrypt:/etc/letsencrypt # default cred: admin@example.com, changeme nextcloud: image: lscr.io/linuxserver/nextcloud:latest container_name: nextcloud environment: - PUID=1000 - PGID=1000 - TZ=Asia/Ulaanbaatar volumes: - ./nextcloud/appdata:/config - ./nextcloud/data:/data restart: unless-stopped homeassistant: image: lscr.io/linuxserver/homeassistant:latest container_name: homeassistant environment: - PUID=1000 - PGID=1000 - TZ=Asia/Ulaanbaatar volumes: - ./hass/config:/config restart: unless-stopped jellyfin: image: lscr.io/linuxserver/jellyfin:latest container_name: jellyfin environment: - PUID=1000 - PGID=1000 - TZ=Asia/Ulaanbaatar volumes: - ./jellyfin/config:/config - ./jellyfin/tvshows:/data/tvshows - ./jellyfin/movies:/data/movies restart: unless-stopped postgresql: image: docker.io/bitnami/postgresql:16 container_name: postgresql environment: - PUID=1000 - PGID=1000 - TZ=Asia/Ulaanbaatar - ALLOW_EMPTY_PASSWORD=yes - POSTGRESQL_USERNAME=bn_odoo - POSTGRESQL_DATABASE=bitnami_odoo volumes: - ./postgresql/postgresql-persistence:/bitnami/postgresql restart: unless-stopped odoo: image: docker.io/bitnami/odoo:17 container_name: odoo environment: - PUID=1000 - PGID=1000 - TZ=Asia/Ulaanbaatar - ALLOW_EMPTY_PASSWORD=yes - ODOO_DATABASE_HOST=postgresql - ODOO_DATABASE_PORT_NUMBER=5432 - ODOO_DATABASE_USER=bn_odoo - ODOO_DATABASE_NAME=bitnami_odoo volumes: - ./odoo/odoo-persistence:/bitnami/odoo depends_on: - postgresql restart: unless-stopped # default cred: user@example.com, bitnami Compose run:\ndocker-compose up -d docker ps:\nCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 0f35e9aafd25 bitnami/odoo:17 \"/opt/bitnami/script…\" 6 minutes ago Up 6 minutes 3000/tcp, 8069/tcp, 8072/tcp odoo 91faa3c03087 lscr.io/linuxserver/homeassistant:latest \"/init\" 6 minutes ago Up 6 minutes 8123/tcp homeassistant a2aa28911120 lscr.io/linuxserver/nextcloud:latest \"/init\" 6 minutes ago Up 6 minutes 80/tcp, 443/tcp nextcloud 89039950eded bitnami/postgresql:16 \"/opt/bitnami/script…\" 6 minutes ago Up 6 minutes 5432/tcp postgresql a2c89d8405bf jc21/nginx-proxy-manager:latest \"/init\" 6 minutes ago Up 6 minutes 0.0.0.0:80-81-\u003e80-81/tcp, :::80-81-\u003e80-81/tcp, 0.0.0.0:443-\u003e443/tcp, :::443-\u003e443/tcp nginxproxymanager 029423ea3e20 lscr.io/linuxserver/jellyfin:latest \"/init\" 6 minutes ago Up 6 minutes 8096/tcp, 8920/tcp jellyfin Port нээх docker expose хийсэн портуудыг хост талдаа нээнэ.\n# Host port нээх sudo firewall-cmd --zone=public --add-service=http --permanent sudo firewall-cmd --zone=public --add-port 8080/tcp --permanent # reload хийх sudo firewall-cmd --reload # port шалгах sudo firewall-cmd --zone=public --list-ports Host-д persist хийгдсэн volume #pwd /home/alma/docker/compose #ls -la -d * */* -rw-rw-r--. 1 alma alma 2022 Jan 18 00:59 docker-compose.yml drwxr-xr-x. 3 root root 20 Jan 6 01:49 hass drwxr-xr-x. 8 alma alma 4096 Jan 18 01:21 hass/config drwxr-xr-x. 5 root root 49 Jan 6 01:49 jellyfin drwxr-xr-x. 6 alma alma 179 Jan 16 09:28 jellyfin/config drwxr-xr-x. 2 alma alma 4096 Jan 14 07:43 jellyfin/movies drwxr-xr-x. 4 alma alma 54 Jan 14 07:43 jellyfin/tvshows drwxr-xr-x. 4 root root 33 Jan 6 01:49 nextcloud drwxr-xr-x. 7 alma alma 95 Jan 6 02:30 nextcloud/appdata drwxrwx---. 5 alma alma 158 Jan 18 06:30 nextcloud/data drwxr-xr-x. 4 root root 37 Jan 6 01:49 nginx drwxr-xr-x. 7 root root 137 Jan 18 06:02 nginx/data drwxr-xr-x. 8 root root 104 Jan 18 06:02 nginx/letsencrypt drwxr-xr-x. 3 root root 30 Jan 17 23:28 odoo drwxrwxr-x. 5 systemd-coredump root 44 Jan 18 01:01 odoo/odoo-persistence drwxr-xr-x. 3 root root 36 Jan 18 00:54 postgresql drwxr-xr-x. 3 1001 1001 18 Jan 18 00:58 postgresql/postgresql-persistence drwxr-xr-x. 4 root root 31 Mar 2 15:02 navidrome drwxr-xr-x. 3 root root 87 Mar 2 15:02 navidrome/data drwxr-xr-x. 2 root root 6 Mar 2 15:02 navidrome/music non-root container-н хувьд permission алдаа заавал, жишээ нь postgresql:\nsudo chown -R 1001:1001 postgresql/postgresql-persistence Permission denied хийж байвал:\n# jellyfin sudo chown -R alma:alma movies sudo chmod -R 755 movies #tvshows Nginx proxy manager http://server-ip:81 хандан default creds-р (admin@example.com pass: changeme) нэвтэрнэ. Дараа нь DuckDNS бүртгүүлээд sub domain (жишээ нь hosono.duckdns.org г.м) авна. Current IP хэсэгт host-н IP (192.168.1.200 г.м) save хийнэ дээд хэсэгт token -copy хийнэ.\nNginx proxy manager -\u003e SSL Certificate -\u003e Add Let’s Encrypt Certificate -\u003e Let’s Encrypt орон Domain Names хэсэгт DuckDNS авсан domain-аа (*.hosono.duckdns.org болон hosono.duckdns.org) оруулна. Email хэсэгт мэдэгдэл авах мэйл хаягаа оруулна. Use a DNS Challenge -г enable хийгээд DuckDNS сонгоод dns_duckdns_token=өмнө copy хийсэн token-oo энд paste хийнэ. Propagation Seconds хэсэгт 120 гэж бичээд save. Алдаа заавал дахин save хийнэ.\nProxy entry hosono.duckdns.org -г http://nginxproxymanager:81 jellyfin.hosono.duckdns.org -г http://jellyfin:8096 гэх мэтээр Certificate тохируулахад Proxy host-ууд бүртгэнэ.\nDomain Names хэсэгт бүртгэж буй sub domain-аа бичин, Scheme хэсэгт http https -с сонгоно. container талаас 443 default хийгдээгүй л бол ихэхндээ http -г сонгоно. Forward Hostname / IP хэсэгт container name эсхүл 127.0.0.1 байж болно.\nSSL хэсэгт SSL Certificate -д бүртгэсэн DuckDNS -с сонгоод Force SSL, HTTP/2 Support гэдгийг сонгоод хадаглах юм. Энэ мэтээр subdomain -уудаа бүртгэнэ.\nSOURCE DESTINATION SSL ACCESS STATUS home.hosono.duckdns.org http://homeassistant:8123 Let’s Encrypt Public Online hosono.duckdns.org http://nginxproxymanager:81 Let’s Encrypt Public Online jellyfin.hosono.duckdns.org http://jellyfin:8096 Let’s Encrypt Public Online nextcloud.hosono.duckdns.org https://nextcloud:443 Let’s Encrypt Public Online odoo.hosono.duckdns.org http://odoo:8069 Let’s Encrypt Public Online HA http://homeassistant:8123 хувьд Proxy бүртгэх дээ Websockets Supports гэдгийг чагтлан өгнө. Дараа нь npm ажиллаж байгаа IP хаягийн мэдээллийг аван HASS дотор configuration.yml -г trusted_proxy хэсэгт npm нэмэн оруулна\ndocker inspect nginxproxymanager ... \"IPAddress\": \"172.23.0.2\" ... # /home/user/docker/compose/hass/config vi configuration.yaml ... http: use_x_forwarded_for: true trusted_proxies: - 172.23.0.0/24 # - 172.23.0.5 ... configuration.yaml save хийгээд homeassistant restart хийнэ:\ndocker restart homeassistant Watchtower Гараар container-ууд update хийнэ. /Docker-compose дотор байнга ажилладаг байхаар тохируулж бас болно/\ndocker run -v /var/run/docker.sock:/var/run/docker.sock containrrr/watchtower --run-once Bookmarks https://youtu.be/qlcVx-k-02E https://notthebe.ee/blog/easy-ssl-in-homelab-dns01/ https://github.com/bitnami/containers/tree/main/bitnami/odoo#configuration https://linux.how2shout.com/how-to-open-or-close-ports-in-almalinux-8-or-rocky-firewall/ https://techoverflow.net/2020/01/28/how-to-fix-bitnami-mariadb-mkdir-cannot-create-directory-bitnami-mariadb-permission-denied/ https://github.com/containrrr/watchtower/discussions/901 https://containrrr.dev/watchtower/ https://github.com/navidrome/navidrome ","wordCount":"991","inLanguage":"en","datePublished":"2024-01-18T00:00:00Z","dateModified":"2024-01-18T00:00:00Z","author":{"@type":"Person","name":"ca4mi"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ca4mi.net/posts/2024-01-18-docker-thinkpadr500/"},"publisher":{"@type":"Organization","name":"ca4mi","logo":{"@type":"ImageObject","url":"https://ca4mi.net/static/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ca4mi.net/ accesskey=h title="ca4mi (Alt + H)">ca4mi</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ca4mi.net/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://ca4mi.net/photos/ title=Photography><span>Photography</span></a></li><li><a href=https://ca4mi.net/bookmark/ title=Bookmark><span>Bookmark</span></a></li><li><a href=https://ca4mi.net/using/ title=Using><span>Using</span></a></li><li><a href=https://ca4mi.net/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://ca4mi.net/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Thinkpad R500-д Almalinux 8 OS + Docker + Nginx proxy manager + SSL certificate + DuckDNS</h1><div class=post-description>Nginx Proxy Manager + DuckDNS + Containers</div><div class=post-meta><span title='2024-01-18 00:00:00 +0000 UTC'>January 18, 2024</span>&nbsp;·&nbsp;ca4mi</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li></li><li><a href=#host-д-persist-хийгдсэн-volume>Host-д persist хийгдсэн volume</a></li><li><a href=#nginx-proxy-manager>Nginx proxy manager</a></li><li><a href=#watchtower>Watchtower</a></li><li><a href=#bookmarks>Bookmarks</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h4 id=os>OS<a hidden class=anchor aria-hidden=true href=#os>#</a></h4><p>Almalinux 8.9 minimal <a href=https://mirrors.almalinux.org/isos/x86_64/8.9.html>ISO</a> суулгасан. Суулгах явцад root-с тусад нь user үүсгэн wheel группд нэмсэн.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># hostnamectl</span>
</span></span><span class=line><span class=cl>         Icon name: computer-laptop
</span></span><span class=line><span class=cl>           Chassis: laptop
</span></span><span class=line><span class=cl>  Operating System: AlmaLinux 8.9 <span class=o>(</span>Midnight Oncilla<span class=o>)</span>
</span></span><span class=line><span class=cl>       CPE OS Name: cpe:/o:almalinux:almalinux:8::baseos
</span></span><span class=line><span class=cl>            Kernel: Linux 4.18.0-513.9.1.el8_9.x86_64
</span></span><span class=line><span class=cl>      Architecture: x86-64
</span></span><span class=line><span class=cl><span class=c1># lshw</span>
</span></span><span class=line><span class=cl>    vendor: LENOVO
</span></span><span class=line><span class=cl>    version: ThinkPad R500
</span></span><span class=line><span class=cl>    cpu: Celeron<span class=o>(</span>R<span class=o>)</span> Dual-Core CPU T3100 @ 1.90GHz
</span></span><span class=line><span class=cl>    ram: 8G DDR2 800MHz
</span></span></code></pre></div><h4 id=docker--docker-compose>Docker & docker compose<a hidden class=anchor aria-hidden=true href=#docker--docker-compose>#</a></h4><p>Суулгах</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo dnf upgrade
</span></span><span class=line><span class=cl>sudo dnf install yum-utils
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sudo dnf install docker-ce docker-ce-cli containerd.io docker-compose-plugin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Complete бол сервис асаана</span>
</span></span><span class=line><span class=cl>sudo systemctl start docker
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> docker
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># check version</span>
</span></span><span class=line><span class=cl>docker --version
</span></span><span class=line><span class=cl><span class=c1># Docker version 24.0.7, build afdd53b</span>
</span></span><span class=line><span class=cl>docker-compose --version
</span></span><span class=line><span class=cl><span class=c1># Docker Compose version v2.12.2</span>
</span></span></code></pre></div><p>Compose ажиллахгүй бол энэ аргаар суулгана:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -L <span class=s2>&#34;https://github.com/docker/compose/releases/download/v2.12.2/docker-compose-</span><span class=k>$(</span>uname -s<span class=k>)</span><span class=s2>-</span><span class=k>$(</span>uname -m<span class=k>)</span><span class=s2>&#34;</span> -o /usr/bin/docker-compose
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>chmod +x /usr/bin/docker-compose
</span></span></code></pre></div><p>Non root user бол docker group үүсгээд sudo үүсгэх боломжтой болгоорой.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Add alma user to wheel group</span>
</span></span><span class=line><span class=cl>sudo usermod -aG wheel alma
</span></span><span class=line><span class=cl><span class=c1># Add alma user to docker group</span>
</span></span><span class=line><span class=cl>sudo usermod -aG docker alma
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># groups</span>
</span></span><span class=line><span class=cl>alma wheel docker
</span></span><span class=line><span class=cl><span class=c1># id</span>
</span></span><span class=line><span class=cl><span class=nv>uid</span><span class=o>=</span>1000<span class=o>(</span>alma<span class=o>)</span> <span class=nv>gid</span><span class=o>=</span>1000<span class=o>(</span>alma<span class=o>)</span> <span class=nv>groups</span><span class=o>=</span>1000<span class=o>(</span>alma<span class=o>)</span>,10<span class=o>(</span>wheel<span class=o>)</span>,992<span class=o>(</span>docker<span class=o>)</span>
</span></span></code></pre></div><h4 id=docker-compose>Docker compose<a hidden class=anchor aria-hidden=true href=#docker-compose>#</a></h4><p><a href=https://nginxproxymanager.com/>nginxproxymanager</a>, <a href=https://nextcloud.com/>nextcloud</a>, <a href=https://www.home-assistant.io/>homeassistant</a>, <a href=https://jellyfin.org/>jellyfin</a>, <a href=https://github.com/bitnami/containers/blob/main/bitnami/odoo/docker-compose.yml>odoo+postgres</a>, <a href=https://www.navidrome.org/>navidrome</a> docker compose бүрдэнэ. Nginx proxy manager дээр HTTPS (Let&rsquo;s encrypt) авахад бас <a href=https://www.duckdns.org/>DuckDNS</a> domain авахад ашиглана. Docker network-оо дундаа ашиглана. 3 port docker -с host руу 80, 81, 443 expose хийсэн.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;2.2&#39;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>nginxproxymanager</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;jc21/nginx-proxy-manager:latest&#39;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>nginxproxymanager</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;80:80&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;81:81&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;443:443&#39;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./nginx/data:/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./nginx/letsencrypt:/etc/letsencrypt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># default cred: admin@example.com, changeme</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>nextcloud</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>lscr.io/linuxserver/nextcloud:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>nextcloud</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Asia/Ulaanbaatar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./nextcloud/appdata:/config </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./nextcloud/data:/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>homeassistant</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>lscr.io/linuxserver/homeassistant:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>homeassistant </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Asia/Ulaanbaatar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./hass/config:/config </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jellyfin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>lscr.io/linuxserver/jellyfin:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>jellyfin </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Asia/Ulaanbaatar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./jellyfin/config:/config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./jellyfin/tvshows:/data/tvshows</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./jellyfin/movies:/data/movies </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>postgresql</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>docker.io/bitnami/postgresql:16</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>postgresql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Asia/Ulaanbaatar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>ALLOW_EMPTY_PASSWORD=yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>POSTGRESQL_USERNAME=bn_odoo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>POSTGRESQL_DATABASE=bitnami_odoo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./postgresql/postgresql-persistence:/bitnami/postgresql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>odoo</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>docker.io/bitnami/odoo:17</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>odoo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Asia/Ulaanbaatar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>ALLOW_EMPTY_PASSWORD=yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>ODOO_DATABASE_HOST=postgresql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>ODOO_DATABASE_PORT_NUMBER=5432</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>ODOO_DATABASE_USER=bn_odoo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>ODOO_DATABASE_NAME=bitnami_odoo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./odoo/odoo-persistence:/bitnami/odoo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>postgresql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># default cred: user@example.com, bitnami</span><span class=w>
</span></span></span></code></pre></div><p>Compose run:</p><pre tabindex=0><code>docker-compose up -d
</code></pre><p><code>docker ps</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>CONTAINER ID   IMAGE                                      COMMAND                  CREATED         STATUS                   PORTS                                                                                  NAMES
</span></span><span class=line><span class=cl>0f35e9aafd25   bitnami/odoo:17                            <span class=s2>&#34;/opt/bitnami/script…&#34;</span>   <span class=m>6</span> minutes ago   Up <span class=m>6</span> minutes             3000/tcp, 8069/tcp, 8072/tcp                                                           odoo
</span></span><span class=line><span class=cl>91faa3c03087   lscr.io/linuxserver/homeassistant:latest   <span class=s2>&#34;/init&#34;</span>                  <span class=m>6</span> minutes ago   Up <span class=m>6</span> minutes             8123/tcp                                                                               homeassistant
</span></span><span class=line><span class=cl>a2aa28911120   lscr.io/linuxserver/nextcloud:latest       <span class=s2>&#34;/init&#34;</span>                  <span class=m>6</span> minutes ago   Up <span class=m>6</span> minutes             80/tcp, 443/tcp                                                                        nextcloud
</span></span><span class=line><span class=cl>89039950eded   bitnami/postgresql:16                      <span class=s2>&#34;/opt/bitnami/script…&#34;</span>   <span class=m>6</span> minutes ago   Up <span class=m>6</span> minutes             5432/tcp                                                                               postgresql
</span></span><span class=line><span class=cl>a2c89d8405bf   jc21/nginx-proxy-manager:latest            <span class=s2>&#34;/init&#34;</span>                  <span class=m>6</span> minutes ago   Up <span class=m>6</span> minutes             0.0.0.0:80-81-&gt;80-81/tcp, :::80-81-&gt;80-81/tcp, 0.0.0.0:443-&gt;443/tcp, :::443-&gt;443/tcp   nginxproxymanager
</span></span><span class=line><span class=cl>029423ea3e20   lscr.io/linuxserver/jellyfin:latest        <span class=s2>&#34;/init&#34;</span>                  <span class=m>6</span> minutes ago   Up <span class=m>6</span> minutes             8096/tcp, 8920/tcp                                                                     jellyfin
</span></span></code></pre></div><h4 id=port-нээх>Port нээх<a hidden class=anchor aria-hidden=true href=#port-нээх>#</a></h4><p>docker expose хийсэн портуудыг хост талдаа нээнэ.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Host port нээх</span>
</span></span><span class=line><span class=cl>sudo firewall-cmd --zone<span class=o>=</span>public --add-service<span class=o>=</span>http --permanent
</span></span><span class=line><span class=cl>sudo firewall-cmd --zone<span class=o>=</span>public --add-port 8080/tcp --permanent
</span></span><span class=line><span class=cl><span class=c1># reload хийх</span>
</span></span><span class=line><span class=cl>sudo firewall-cmd --reload
</span></span><span class=line><span class=cl><span class=c1># port шалгах</span>
</span></span><span class=line><span class=cl>sudo firewall-cmd --zone<span class=o>=</span>public --list-ports
</span></span></code></pre></div><h3 id=host-д-persist-хийгдсэн-volume>Host-д persist хийгдсэн volume<a hidden class=anchor aria-hidden=true href=#host-д-persist-хийгдсэн-volume>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#pwd</span>
</span></span><span class=line><span class=cl>/home/alma/docker/compose
</span></span><span class=line><span class=cl><span class=c1>#ls -la -d * */*</span>
</span></span><span class=line><span class=cl>-rw-rw-r--. <span class=m>1</span> alma             alma <span class=m>2022</span> Jan <span class=m>18</span> 00:59 docker-compose.yml
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>3</span> root             root   <span class=m>20</span> Jan  <span class=m>6</span> 01:49 hass
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>8</span> alma             alma <span class=m>4096</span> Jan <span class=m>18</span> 01:21 hass/config
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>5</span> root             root   <span class=m>49</span> Jan  <span class=m>6</span> 01:49 jellyfin
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>6</span> alma             alma  <span class=m>179</span> Jan <span class=m>16</span> 09:28 jellyfin/config
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>2</span> alma             alma <span class=m>4096</span> Jan <span class=m>14</span> 07:43 jellyfin/movies
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>4</span> alma             alma   <span class=m>54</span> Jan <span class=m>14</span> 07:43 jellyfin/tvshows
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>4</span> root             root   <span class=m>33</span> Jan  <span class=m>6</span> 01:49 nextcloud
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>7</span> alma             alma   <span class=m>95</span> Jan  <span class=m>6</span> 02:30 nextcloud/appdata
</span></span><span class=line><span class=cl>drwxrwx---. <span class=m>5</span> alma             alma  <span class=m>158</span> Jan <span class=m>18</span> 06:30 nextcloud/data
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>4</span> root             root   <span class=m>37</span> Jan  <span class=m>6</span> 01:49 nginx
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>7</span> root             root  <span class=m>137</span> Jan <span class=m>18</span> 06:02 nginx/data
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>8</span> root             root  <span class=m>104</span> Jan <span class=m>18</span> 06:02 nginx/letsencrypt
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>3</span> root             root   <span class=m>30</span> Jan <span class=m>17</span> 23:28 odoo
</span></span><span class=line><span class=cl>drwxrwxr-x. <span class=m>5</span> systemd-coredump root   <span class=m>44</span> Jan <span class=m>18</span> 01:01 odoo/odoo-persistence
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>3</span> root             root   <span class=m>36</span> Jan <span class=m>18</span> 00:54 postgresql
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>3</span>             <span class=m>1001</span> <span class=m>1001</span>   <span class=m>18</span> Jan <span class=m>18</span> 00:58 postgresql/postgresql-persistence
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>4</span> root             root   <span class=m>31</span> Mar  <span class=m>2</span> 15:02 navidrome
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>3</span> root             root   <span class=m>87</span> Mar  <span class=m>2</span> 15:02 navidrome/data
</span></span><span class=line><span class=cl>drwxr-xr-x. <span class=m>2</span> root             root    <span class=m>6</span> Mar  <span class=m>2</span> 15:02 navidrome/music
</span></span></code></pre></div><p>non-root container-н хувьд permission алдаа заавал, жишээ нь postgresql:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo chown -R 1001:1001 postgresql/postgresql-persistence
</span></span></code></pre></div><p>Permission denied хийж байвал:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># jellyfin</span>
</span></span><span class=line><span class=cl>sudo chown -R alma:alma movies
</span></span><span class=line><span class=cl>sudo chmod -R <span class=m>755</span> movies <span class=c1>#tvshows</span>
</span></span></code></pre></div><h3 id=nginx-proxy-manager>Nginx proxy manager<a hidden class=anchor aria-hidden=true href=#nginx-proxy-manager>#</a></h3><p><code>http://server-ip:81</code> хандан default creds-р (<code>admin@example.com</code> pass: <code>changeme</code>) нэвтэрнэ. Дараа нь <a href=https://duckdns.org/>DuckDNS</a> бүртгүүлээд sub domain (жишээ нь <code>hosono</code>.duckdns.org г.м) авна. <code>Current IP</code> хэсэгт host-н IP (192.168.1.200 г.м) save хийнэ дээд хэсэгт <code>token</code> -copy хийнэ.</p><p>Nginx proxy manager -> SSL Certificate -> Add Let&rsquo;s Encrypt Certificate -> Let&rsquo;s Encrypt орон Domain Names хэсэгт DuckDNS авсан domain-аа (<code>*.hosono.duckdns.org</code> болон <code>hosono.duckdns.org</code>) оруулна. Email хэсэгт мэдэгдэл авах мэйл хаягаа оруулна. Use a DNS Challenge -г enable хийгээд <code>DuckDNS</code> сонгоод <code>dns_duckdns_token=өмнө copy хийсэн token-oo энд paste хийнэ</code>. Propagation Seconds хэсэгт <code>120</code> гэж бичээд save. Алдаа заавал дахин save хийнэ.</p><h4 id=proxy-entry>Proxy entry<a hidden class=anchor aria-hidden=true href=#proxy-entry>#</a></h4><p><code>hosono.duckdns.org</code> -г <code>http://nginxproxymanager:81</code>
<code>jellyfin.hosono.duckdns.org</code> -г <code>http://jellyfin:8096</code> гэх мэтээр Certificate тохируулахад Proxy host-ууд бүртгэнэ.</p><p>Domain Names хэсэгт бүртгэж буй sub domain-аа бичин, Scheme хэсэгт <code>http</code> <code>https</code> -с сонгоно. container талаас 443 default хийгдээгүй л бол ихэхндээ <code>http</code> -г сонгоно. Forward Hostname / IP хэсэгт container name эсхүл 127.0.0.1 байж болно.</p><p>SSL хэсэгт SSL Certificate -д бүртгэсэн DuckDNS -с сонгоод Force SSL, HTTP/2 Support гэдгийг сонгоод хадаглах юм. Энэ мэтээр subdomain -уудаа бүртгэнэ.</p><table><thead><tr><th>SOURCE</th><th>DESTINATION</th><th>SSL</th><th>ACCESS</th><th>STATUS</th></tr></thead><tbody><tr><td>home.hosono.duckdns.org</td><td>http://homeassistant:8123</td><td>Let&rsquo;s Encrypt</td><td>Public</td><td>Online</td></tr><tr><td>hosono.duckdns.org</td><td>http://nginxproxymanager:81</td><td>Let&rsquo;s Encrypt</td><td>Public</td><td>Online</td></tr><tr><td>jellyfin.hosono.duckdns.org</td><td>http://jellyfin:8096</td><td>Let&rsquo;s Encrypt</td><td>Public</td><td>Online</td></tr><tr><td>nextcloud.hosono.duckdns.org</td><td>https://nextcloud:443</td><td>Let&rsquo;s Encrypt</td><td>Public</td><td>Online</td></tr><tr><td>odoo.hosono.duckdns.org</td><td>http://odoo:8069</td><td>Let&rsquo;s Encrypt</td><td>Public</td><td>Online</td></tr></tbody></table><h5 id=ha>HA<a hidden class=anchor aria-hidden=true href=#ha>#</a></h5><p>http://homeassistant:8123 хувьд Proxy бүртгэх дээ Websockets Supports гэдгийг чагтлан өгнө. Дараа нь npm ажиллаж байгаа IP хаягийн мэдээллийг аван HASS дотор configuration.yml -г trusted_proxy хэсэгт npm нэмэн оруулна</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker inspect nginxproxymanager
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl><span class=s2>&#34;IPAddress&#34;</span>: <span class=s2>&#34;172.23.0.2&#34;</span>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># /home/user/docker/compose/hass/config</span>
</span></span><span class=line><span class=cl>vi configuration.yaml
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>http:
</span></span><span class=line><span class=cl>  use_x_forwarded_for: <span class=nb>true</span>
</span></span><span class=line><span class=cl>  trusted_proxies:
</span></span><span class=line><span class=cl>    - 172.23.0.0/24
</span></span><span class=line><span class=cl>  <span class=c1># - 172.23.0.5</span>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>configuration.yaml save хийгээд homeassistant restart хийнэ:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker restart homeassistant
</span></span></code></pre></div><h3 id=watchtower>Watchtower<a hidden class=anchor aria-hidden=true href=#watchtower>#</a></h3><p>Гараар container-ууд update хийнэ.
/Docker-compose дотор байнга ажилладаг байхаар тохируулж бас болно/</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run -v /var/run/docker.sock:/var/run/docker.sock containrrr/watchtower --run-once
</span></span></code></pre></div><h3 id=bookmarks>Bookmarks<a hidden class=anchor aria-hidden=true href=#bookmarks>#</a></h3><ul><li><a href=https://youtu.be/qlcVx-k-02E>https://youtu.be/qlcVx-k-02E</a></li><li><a href=https://notthebe.ee/blog/easy-ssl-in-homelab-dns01/>https://notthebe.ee/blog/easy-ssl-in-homelab-dns01/</a></li><li><a href=https://github.com/bitnami/containers/tree/main/bitnami/odoo#configuration>https://github.com/bitnami/containers/tree/main/bitnami/odoo#configuration</a></li><li><a href=https://linux.how2shout.com/how-to-open-or-close-ports-in-almalinux-8-or-rocky-firewall/>https://linux.how2shout.com/how-to-open-or-close-ports-in-almalinux-8-or-rocky-firewall/</a></li><li><a href=https://techoverflow.net/2020/01/28/how-to-fix-bitnami-mariadb-mkdir-cannot-create-directory-bitnami-mariadb-permission-denied/>https://techoverflow.net/2020/01/28/how-to-fix-bitnami-mariadb-mkdir-cannot-create-directory-bitnami-mariadb-permission-denied/</a></li><li><a href=https://github.com/containrrr/watchtower/discussions/901>https://github.com/containrrr/watchtower/discussions/901</a></li><li><a href=https://containrrr.dev/watchtower/>https://containrrr.dev/watchtower/</a></li><li><a href=https://github.com/navidrome/navidrome>https://github.com/navidrome/navidrome</a></li></ul></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://ca4mi.net/>ca4mi</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>