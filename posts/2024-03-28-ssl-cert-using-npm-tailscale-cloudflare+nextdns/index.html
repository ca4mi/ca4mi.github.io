<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Tailscale VPN(mesh) + Cloudflare + NextDNS + Nignx Proxy Manager (Let's Encrypt) SSL certificate тохируулах | ca4mi</title>
<meta name=keywords content><meta name=description content="Note: Дээрх аргаас гадна өөр олон арга ашиглан vpn үүсгэх, тохируулах боломжтой.
Domain худалдан авах
Энэ удаа hover.com-с domain аван тохируулга хийнэ. Нэвтрэн ороод авах гэж domain нэрээр хайлт хийнэ. Гарч ирсэн утгуудаас сонголт хийн худалдан авна. Domain, нэг жилдээ хямдхан, дараа жилээс үнэ нь 10 хэд дахин өсдөг тул сунгалт хийхэд үнийн өсөлт бага байхаар худалдан авалт хийгээрэй.

hosono.space нэртэй domain худалдан авлаа.
Domain DNS
hosono.space domain-н тохироо дах DNS хэсэгт доорх байдлаар тохируулга хийнэ:
"><meta name=author content="ca4mi"><link rel=canonical href=https://ca4mi.github.io/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/><link crossorigin=anonymous href=/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css integrity="sha256-1vzSCk+4bvpN+sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as=style><link rel=icon href=https://ca4mi.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ca4mi.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ca4mi.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ca4mi.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ca4mi.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://ca4mi.github.io/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://ca4mi.github.io/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/"><meta property="og:site_name" content="ca4mi"><meta property="og:title" content="Tailscale VPN(mesh) + Cloudflare + NextDNS + Nignx Proxy Manager (Let's Encrypt) SSL certificate тохируулах"><meta property="og:description" content="Note: Дээрх аргаас гадна өөр олон арга ашиглан vpn үүсгэх, тохируулах боломжтой.
Domain худалдан авах Энэ удаа hover.com-с domain аван тохируулга хийнэ. Нэвтрэн ороод авах гэж domain нэрээр хайлт хийнэ. Гарч ирсэн утгуудаас сонголт хийн худалдан авна. Domain, нэг жилдээ хямдхан, дараа жилээс үнэ нь 10 хэд дахин өсдөг тул сунгалт хийхэд үнийн өсөлт бага байхаар худалдан авалт хийгээрэй. hosono.space нэртэй domain худалдан авлаа.
Domain DNS hosono.space domain-н тохироо дах DNS хэсэгт доорх байдлаар тохируулга хийнэ: "><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-28T00:00:00+00:00"><meta property="article:modified_time" content="2024-03-28T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tailscale VPN(mesh) + Cloudflare + NextDNS + Nignx Proxy Manager (Let's Encrypt) SSL certificate тохируулах"><meta name=twitter:description content="Note: Дээрх аргаас гадна өөр олон арга ашиглан vpn үүсгэх, тохируулах боломжтой.
Domain худалдан авах
Энэ удаа hover.com-с domain аван тохируулга хийнэ. Нэвтрэн ороод авах гэж domain нэрээр хайлт хийнэ. Гарч ирсэн утгуудаас сонголт хийн худалдан авна. Domain, нэг жилдээ хямдхан, дараа жилээс үнэ нь 10 хэд дахин өсдөг тул сунгалт хийхэд үнийн өсөлт бага байхаар худалдан авалт хийгээрэй.

hosono.space нэртэй domain худалдан авлаа.
Domain DNS
hosono.space domain-н тохироо дах DNS хэсэгт доорх байдлаар тохируулга хийнэ:
"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ca4mi.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Tailscale VPN(mesh) + Cloudflare + NextDNS + Nignx Proxy Manager (Let's Encrypt) SSL certificate тохируулах","item":"https://ca4mi.github.io/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Tailscale VPN(mesh) + Cloudflare + NextDNS + Nignx Proxy Manager (Let's Encrypt) SSL certificate тохируулах","name":"Tailscale VPN(mesh) \u002b Cloudflare \u002b NextDNS \u002b Nignx Proxy Manager (Let\u0027s Encrypt) SSL certificate тохируулах","description":"Note: Дээрх аргаас гадна өөр олон арга ашиглан vpn үүсгэх, тохируулах боломжтой.\nDomain худалдан авах Энэ удаа hover.com-с domain аван тохируулга хийнэ. Нэвтрэн ороод авах гэж domain нэрээр хайлт хийнэ. Гарч ирсэн утгуудаас сонголт хийн худалдан авна. Domain, нэг жилдээ хямдхан, дараа жилээс үнэ нь 10 хэд дахин өсдөг тул сунгалт хийхэд үнийн өсөлт бага байхаар худалдан авалт хийгээрэй. hosono.space нэртэй domain худалдан авлаа.\nDomain DNS hosono.space domain-н тохироо дах DNS хэсэгт доорх байдлаар тохируулга хийнэ: ","keywords":[],"articleBody":"Note: Дээрх аргаас гадна өөр олон арга ашиглан vpn үүсгэх, тохируулах боломжтой.\nDomain худалдан авах Энэ удаа hover.com-с domain аван тохируулга хийнэ. Нэвтрэн ороод авах гэж domain нэрээр хайлт хийнэ. Гарч ирсэн утгуудаас сонголт хийн худалдан авна. Domain, нэг жилдээ хямдхан, дараа жилээс үнэ нь 10 хэд дахин өсдөг тул сунгалт хийхэд үнийн өсөлт бага байхаар худалдан авалт хийгээрэй. hosono.space нэртэй domain худалдан авлаа.\nDomain DNS hosono.space domain-н тохироо дах DNS хэсэгт доорх байдлаар тохируулга хийнэ: TYPE HOST VALUE TTL ADDED BY A * 216.40.34.41 15 Minutes Hover A @ 216.40.34.41 15 Minutes Hover MX @ 10 mx.hover.com.cust.hostedemail.com 15 Minutes Hover CNAME mail mail.hover.com.cust.hostedemail.com 15 Minutes Hover MX, CNAME тохируулга хийхгүй байж болно.\nDomain Nameserver Overview хэсэг дах Nameserver хэсэгт edit хийнэ ridge.ns.cloudflare.com, tess.ns.cloudflare.com оруулан save хийнэ.\nCloudflare-д бүртгүүлэх \u0026 тохируулах DNS Records Cloudflare.com хаягаар орон бүртгэлгүй бол шинээр бүртгүүлнэ. Нэвтрэн ороод Websites хэсгээр орон Add a site дээр даран өмнө авсан domain нэрээ оруулаарай. DNS цэсээр орон Records бүртгэл хийнэ. Type Name Content Proxy Status TLL A * 216.40.34.41 Proxied Auto A hosono.space 216.40.34.41 Proxied Auto A www 216.40.34.41 Proxied Auto API Token авах Overview цэсээс доошлуулаад харвал API гэсэн хэсэг байгаа Get your IP token дээр дарна. Edit zone DNS дэх use template -г сонгоно. Нэр, Permission, Zone Resources -г доорх зургийн дагуу тохируулаад Contiune and summary дарна. Permissions: Zone, DNS, Edit Zone Resources Include, All Zones\nCreate Token дарна: gjeuX3Jw8zXCCohha11N9zauX4y02XVx8ZrmY5Nt token-гоо хуулж аваарай. Бусдад дамжуулах ил газар хуулаад хэрэггүй юм. Note: Жишээ энэ token-г устгасан болно.\nNignx Proxy Manager NPM NPM суулгах заавартай энд даран дэлгэрүүлэн үзнэ үү. Товчоор бол docker-compose.yml дотор жишээ нь:\nversion: '2.2' services: nginxproxymanager: image: 'jc21/nginx-proxy-manager:latest' container_name: nginxproxymanager restart: unless-stopped ports: - '80:80' - '81:81' - '443:443' volumes: - ./nginx/data:/data - ./nginx/letsencrypt:/etc/letsencrypt # default cred: admin@example.com, changeme суулгаад localhost:81 -р хандан default creds хандалт хийнэ.\nLet’s Encrypt - Cloudflare SSL Certificates -\u003e Add SSL Certificate -\u003e Let's Encrypt сонгоно. Талбар Тайлбар Domain Names Эхэнд авсан domain-г бичин оруулна. *.hosono.space г.м Email Address for Let’s Encrypt Certificates хугацаа дуусах үед мэдэгдэл авах мэйл хаяг бичин тохируулна Use a DNS Challenge Үүнийг чагтлах DNS Provider Cloudflare -г сонгоно Credentials File Content Cloudflares-с авсан API token-г 1234 гэсэн тоон утгийн оронд солин оруулна Propagation Seconds Хоосон орхиж болно I Agree Үүнийг чагтлах Credentials File Content:\ndns_cloudflare_api_token = Proxy Hosts Add proxy hosts дээр даран жишээ нь jellyfin-г тохируулж буйг зургаас харна уу. Domain name хэсэгт хандах subdomain бичнэ. Scheme, IP, forward port-ууд тухайн container-н тохиргооноос хамааран өөр байна. Jellyfin-н default port: 8096, docker-compose дотор container name нь jellyfin ба compose нэг network-д тул container name-г хандалт хийж болох юм г.м. SSL цэсээр орон SSL Certificate талбарт өмнө үүсгэсэн *.hosono.space -г сонгоод force SSL, HTTPS Support сонгон save хийнэ. Энэ мэтээр proxy hosts тохируулах юм.\nTailscale \u0026 NextDNS Tailscale бүртгэлгүй бол бүртгүүлээд сервер дээрээ script ашиглан суулгаад machine бүртгэл хийгээд approve хийсэн бол доорх зураг шиг харагдана. NextDNS бүртгэлгүй бол бүртгүүлээд Endpoints хэсэг дэх ID хуулна. Tailscale-н dashbaord руу буцан ороод DNS цэсээр орон Add nameserver дээр даран NextDNS-г сонгоно. Гарч ирсэн цонхонд NextDNS-н Endpoints хэсэг дэх ID-г оруулан save. Дараа нь Override local DNS -г on болгоно. Үүний дараа NextDNS тохиргоон дах Settings хэсэг дах Rewrites-д New rewrite оруулна. Domain талбарт hosono.space, Answer хэсэгт tailscale-н machine IP address оруулан save. Save хийсэн бол дараах байдалтай харагдана. Tailscale -г on болгоод https://jellyfin.hosono.space руу хандан, SSL Cert шалгавал: ","wordCount":"564","inLanguage":"en","datePublished":"2024-03-28T00:00:00Z","dateModified":"2024-03-28T00:00:00Z","author":{"@type":"Person","name":"ca4mi"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ca4mi.github.io/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/"},"publisher":{"@type":"Organization","name":"ca4mi","logo":{"@type":"ImageObject","url":"https://ca4mi.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ca4mi.github.io/ accesskey=h title="ca4mi (Alt + H)">ca4mi</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ca4mi.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://ca4mi.github.io/bookmark/ title=Bookmark><span>Bookmark</span></a></li><li><a href=https://ca4mi.github.io/using/ title=Using><span>Using</span></a></li><li><a href=https://ca4mi.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://ca4mi.github.io/archives/ title=Archives><span>Archives</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Tailscale VPN(mesh) + Cloudflare + NextDNS + Nignx Proxy Manager (Let's Encrypt) SSL certificate тохируулах</h1><div class=post-meta><span title='2024-03-28 00:00:00 +0000 UTC'>March 28, 2024</span>&nbsp;·&nbsp;ca4mi</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#domain-худалдан-авах>Domain худалдан авах</a></li><li><a href=#cloudflare-д-бүртгүүлэх--тохируулах>Cloudflare-д бүртгүүлэх & тохируулах</a></li><li><a href=#nignx-proxy-manager>Nignx Proxy Manager</a></li><li><a href=#tailscale--nextdns>Tailscale & NextDNS</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>Note: Дээрх аргаас гадна өөр олон арга ашиглан vpn үүсгэх, тохируулах боломжтой.</p><h3 id=domain-худалдан-авах>Domain худалдан авах<a hidden class=anchor aria-hidden=true href=#domain-худалдан-авах>#</a></h3><p>Энэ удаа hover.com-с domain аван тохируулга хийнэ. Нэвтрэн ороод авах гэж domain нэрээр хайлт хийнэ. Гарч ирсэн утгуудаас сонголт хийн худалдан авна. Domain, нэг жилдээ хямдхан, дараа жилээс үнэ нь 10 хэд дахин өсдөг тул сунгалт хийхэд үнийн өсөлт бага байхаар худалдан авалт хийгээрэй.
<img alt="Hover.com domain pick" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240325000838.png>
<code>hosono.space</code> нэртэй domain худалдан авлаа.</p><h4 id=domain-dns>Domain DNS<a hidden class=anchor aria-hidden=true href=#domain-dns>#</a></h4><p>hosono.space domain-н тохироо дах DNS хэсэгт доорх байдлаар тохируулга хийнэ:
<img alt="Hover.com domain DNS" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240325001442.png></p><table><thead><tr><th>TYPE</th><th>HOST</th><th>VALUE</th><th>TTL</th><th>ADDED BY</th></tr></thead><tbody><tr><td>A</td><td>*</td><td>216.40.34.41</td><td>15 Minutes</td><td>Hover</td></tr><tr><td>A</td><td>@</td><td>216.40.34.41</td><td>15 Minutes</td><td>Hover</td></tr><tr><td>MX</td><td>@</td><td>10 mx.hover.com.cust.hostedemail.com</td><td>15 Minutes</td><td>Hover</td></tr><tr><td>CNAME</td><td>mail</td><td>mail.hover.com.cust.hostedemail.com</td><td>15 Minutes</td><td>Hover</td></tr></tbody></table><p><code>MX</code>, <code>CNAME</code> тохируулга хийхгүй байж болно.</p><h4 id=domain-nameserver>Domain Nameserver<a hidden class=anchor aria-hidden=true href=#domain-nameserver>#</a></h4><p>Overview хэсэг дах Nameserver хэсэгт edit хийнэ
<img alt="Edit Nameserver" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240325004547.png>
<code>ridge.ns.cloudflare.com</code>, <code>tess.ns.cloudflare.com</code> оруулан save хийнэ.</p><h3 id=cloudflare-д-бүртгүүлэх--тохируулах>Cloudflare-д бүртгүүлэх & тохируулах<a hidden class=anchor aria-hidden=true href=#cloudflare-д-бүртгүүлэх--тохируулах>#</a></h3><h4 id=dns-records>DNS Records<a hidden class=anchor aria-hidden=true href=#dns-records>#</a></h4><p>Cloudflare.com хаягаар орон бүртгэлгүй бол шинээр бүртгүүлнэ. Нэвтрэн ороод Websites хэсгээр орон <code>Add a site</code> дээр даран өмнө авсан domain нэрээ оруулаарай. <code>DNS</code> цэсээр орон Records бүртгэл хийнэ.
<img alt="Cloudflare add DNS records for domain" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240325003911.png></p><table><thead><tr><th>Type</th><th>Name</th><th>Content</th><th>Proxy Status</th><th>TLL</th></tr></thead><tbody><tr><td>A</td><td>*</td><td>216.40.34.41</td><td>Proxied</td><td>Auto</td></tr><tr><td>A</td><td>hosono.space</td><td>216.40.34.41</td><td>Proxied</td><td>Auto</td></tr><tr><td>A</td><td>www</td><td>216.40.34.41</td><td>Proxied</td><td>Auto</td></tr></tbody></table><h4 id=api-token-авах>API Token авах<a hidden class=anchor aria-hidden=true href=#api-token-авах>#</a></h4><p>Overview цэсээс доошлуулаад харвал API гэсэн хэсэг байгаа Get your IP token дээр дарна.
<img alt="Cloudflare get API Token" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240325171509.png></p><p><code>Edit zone DNS</code> дэх use template -г сонгоно.
<img alt="Edit zone DNS" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240325174231.png>
Нэр, Permission, Zone Resources -г доорх зургийн дагуу тохируулаад <code>Contiune and summary</code> дарна.
<img alt="Edit zone DNS" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240325173045.png>
Permissions:
<code>Zone</code>, <code>DNS</code>, <code>Edit</code>
Zone Resources
<code>Include</code>, <code>All Zones</code></p><p>Create Token дарна:
<img alt="Create Token" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240325174717.png></p><p><code>gjeuX3Jw8zXCCohha11N9zauX4y02XVx8ZrmY5Nt</code> token-гоо хуулж аваарай. Бусдад дамжуулах ил газар хуулаад хэрэггүй юм.
<img alt="Copy token" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240325174908.png>
Note: Жишээ энэ token-г устгасан болно.</p><h3 id=nignx-proxy-manager>Nignx Proxy Manager<a hidden class=anchor aria-hidden=true href=#nignx-proxy-manager>#</a></h3><h4 id=npm>NPM<a hidden class=anchor aria-hidden=true href=#npm>#</a></h4><p>NPM суулгах заавартай <a href=https://ca4mi.github.io/posts/2024-01-18-docker-thinkpadr500/>энд</a> даран дэлгэрүүлэн үзнэ үү. Товчоор бол <code>docker-compose.yml</code> дотор жишээ нь:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;2.2&#39;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>nginxproxymanager</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;jc21/nginx-proxy-manager:latest&#39;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>nginxproxymanager</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;80:80&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;81:81&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;443:443&#39;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./nginx/data:/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./nginx/letsencrypt:/etc/letsencrypt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># default cred: admin@example.com, changeme</span><span class=w>
</span></span></span></code></pre></div><p>суулгаад <code>localhost:81</code> -р хандан default creds хандалт хийнэ.</p><h4 id=lets-encrypt---cloudflare>Let&rsquo;s Encrypt - Cloudflare<a hidden class=anchor aria-hidden=true href=#lets-encrypt---cloudflare>#</a></h4><p><code>SSL Certificates</code> -> <code>Add SSL Certificate</code> -> <code>Let's Encrypt</code> сонгоно.
<img alt="Add SSL - Let&rsquo;s Encrypt" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240325180527.png></p><table><thead><tr><th>Талбар</th><th>Тайлбар</th></tr></thead><tbody><tr><td>Domain Names</td><td>Эхэнд авсан domain-г бичин оруулна. <code>*.hosono.space</code> г.м</td></tr><tr><td>Email Address for Let&rsquo;s Encrypt</td><td>Certificates хугацаа дуусах үед мэдэгдэл авах мэйл хаяг бичин тохируулна</td></tr><tr><td>Use a DNS Challenge</td><td>Үүнийг чагтлах</td></tr><tr><td>DNS Provider</td><td>Cloudflare -г сонгоно</td></tr><tr><td>Credentials File Content</td><td>Cloudflares-с авсан API token-г 1234 гэсэн тоон утгийн оронд солин оруулна</td></tr><tr><td>Propagation Seconds</td><td>Хоосон орхиж болно</td></tr><tr><td>I Agree</td><td>Үүнийг чагтлах</td></tr></tbody></table><p>Credentials File Content:</p><pre tabindex=0><code>dns_cloudflare_api_token = &lt;Cloudflare API token байна&gt;
</code></pre><h4 id=proxy-hosts>Proxy Hosts<a hidden class=anchor aria-hidden=true href=#proxy-hosts>#</a></h4><p>Add proxy hosts дээр даран жишээ нь jellyfin-г тохируулж буйг зургаас харна уу. Domain name хэсэгт хандах subdomain бичнэ. Scheme, IP, forward port-ууд тухайн container-н тохиргооноос хамааран өөр байна. Jellyfin-н default port: 8096, docker-compose дотор container name нь jellyfin ба compose нэг network-д тул container name-г хандалт хийж болох юм г.м.
<img alt="Proxy Hosts" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240328155401.png></p><p>SSL цэсээр орон SSL Certificate талбарт өмнө үүсгэсэн <code>*.hosono.space</code> -г сонгоод <code>force SSL</code>, <code>HTTPS Support</code> сонгон save хийнэ.
<img alt="Proxy Hosts" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240328155453.png></p><p>Энэ мэтээр proxy hosts тохируулах юм.</p><h3 id=tailscale--nextdns>Tailscale & NextDNS<a hidden class=anchor aria-hidden=true href=#tailscale--nextdns>#</a></h3><p><a href=https://tailscale.com>Tailscale</a> бүртгэлгүй бол бүртгүүлээд сервер дээрээ <a href=https://tailscale.com/kb/1347/installation>script</a> ашиглан суулгаад machine бүртгэл хийгээд approve хийсэн бол доорх зураг шиг харагдана.
<img alt="Tailscale dashbaord" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240328161357.png></p><p><a href=https://nextdns.io>NextDNS</a> бүртгэлгүй бол бүртгүүлээд Endpoints хэсэг дэх ID хуулна. Tailscale-н dashbaord руу буцан ороод DNS цэсээр орон <code>Add nameserver</code> дээр даран <code>NextDNS</code>-г сонгоно.
<img alt="Add nameserver" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240328163003.png></p><p>Гарч ирсэн цонхонд NextDNS-н Endpoints хэсэг дэх ID-г оруулан save. Дараа нь <code>Override local DNS</code> -г on болгоно.
<img alt="NextDNS endpoints" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240328163200.png></p><p>Үүний дараа NextDNS <a href=https://my.nextdns.io/>тохиргоон</a> дах Settings хэсэг дах Rewrites-д <code>New rewrite</code> оруулна.
<img alt="NextDNS rewrites" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240328164037.png>
Domain талбарт <code>hosono.space</code>, Answer хэсэгт tailscale-н machine IP address оруулан save. Save хийсэн бол дараах байдалтай харагдана.
<img alt="NextDNS rewrites sample" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240328164305.png>
Tailscale -г on болгоод <code>https://jellyfin.hosono.space</code> руу хандан, SSL Cert шалгавал:
<img alt="Shown SSL Cert on jellyfin" loading=lazy src=/posts/2024-03-28-ssl-cert-using-npm-tailscale-cloudflare+nextdns/images/20240328160211.png></p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://ca4mi.github.io/>ca4mi</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>